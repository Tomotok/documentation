

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. tomotok.core package &mdash; tomotok 1.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="tomotok 1.3 documentation" href="../index.html"/>
        <link rel="next" title="1.1.1. tomotok.core.geometry package" href="tomotok.core.geometry.html"/>
        <link rel="prev" title="7. Glossary" href="../glossary.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> tomotok
          

          
          </a>

          
            
            
              <div class="version">
                1.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../welcome.html">1. Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licence.html">2. Licence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">3. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inversions/inversions.html">4. Inversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auxilia/auxilia.html">5. Auxiliary functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gui/gui.html">6. Graphical User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">7. Glossary</a></li>
</ul>
<p class="caption"><span class="caption-text">Api Doc</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. tomotok.core package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">1.1. Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tomotok.core.geometry.html">1.1.1. tomotok.core.geometry package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tomotok.core.inversions.html">1.1.2. tomotok.core.inversions package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tomotok.core.io.html">1.1.3. tomotok.core.io package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tomotok.core.tools.html">1.1.4. tomotok.core.tools package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">1.2. Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-tomotok.core.derivative">1.3. tomotok.core.derivative module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-tomotok.core.phantoms">1.4. tomotok.core.phantoms module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tomotok.gui.html">2. tomotok.gui package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tomotok</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>1. tomotok.core package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/tomotok.core.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-tomotok.core">
<span id="tomotok-core-package"></span><h1>1. tomotok.core package<a class="headerlink" href="#module-tomotok.core" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>1.1. Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="tomotok.core.geometry.html">1.1.1. tomotok.core.geometry package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.geometry.html#submodules">1.1.1.1. Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.geometry.html#module-tomotok.core.geometry.analytical">1.1.1.2. tomotok.core.geometry.analytical module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.geometry.html#module-tomotok.core.geometry.generators">1.1.1.3. tomotok.core.geometry.generators module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.geometry.html#module-tomotok.core.geometry.grids">1.1.1.4. tomotok.core.geometry.grids module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.geometry.html#module-tomotok.core.geometry.handler">1.1.1.5. tomotok.core.geometry.handler module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.geometry.html#module-tomotok.core.geometry.io">1.1.1.6. tomotok.core.geometry.io module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.geometry.html#module-tomotok.core.geometry.los">1.1.1.7. tomotok.core.geometry.los module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tomotok.core.inversions.html">1.1.2. tomotok.core.inversions package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.inversions.html#submodules">1.1.2.1. Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.inversions.html#module-tomotok.core.inversions.bob">1.1.2.2. tomotok.core.inversions.bob module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.inversions.html#module-tomotok.core.inversions.fixed">1.1.2.3. tomotok.core.inversions.fixed module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.inversions.html#module-tomotok.core.inversions.lame">1.1.2.4. tomotok.core.inversions.lame module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.inversions.html#module-tomotok.core.inversions.mfr">1.1.2.5. tomotok.core.inversions.mfr module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tomotok.core.io.html">1.1.3. tomotok.core.io package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.io.html#submodules">1.1.3.1. Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.io.html#module-tomotok.core.io.diag">1.1.3.2. tomotok.core.io.diag module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.io.html#module-tomotok.core.io.support">1.1.3.3. tomotok.core.io.support module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.io.html#module-tomotok.core.io.tokamaks">1.1.3.4. tomotok.core.io.tokamaks module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tomotok.core.tools.html">1.1.4. tomotok.core.tools package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.tools.html#submodules">1.1.4.1. Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.tools.html#module-tomotok.core.tools.checkers">1.1.4.2. tomotok.core.tools.checkers module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tomotok.core.tools.html#examples">1.1.4.2.1. Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.tools.html#module-tomotok.core.tools.data">1.1.4.3. tomotok.core.tools.data module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.tools.html#tomotok-core-tools-gifmaker-module">1.1.4.4. tomotok.core.tools.gifmaker module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.tools.html#module-tomotok.core.tools.hdf">1.1.4.5. tomotok.core.tools.hdf module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.tools.html#module-tomotok.core.tools.postproc">1.1.4.6. tomotok.core.tools.postproc module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomotok.core.tools.html#module-tomotok.core.tools.projection">1.1.4.7. tomotok.core.tools.projection module</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>1.2. Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-tomotok.core.derivative">
<span id="tomotok-core-derivative-module"></span><h2>1.3. tomotok.core.derivative module<a class="headerlink" href="#module-tomotok.core.derivative" title="Permalink to this headline">¶</a></h2>
<p>Contains functions for derivative matrix computation.</p>
<blockquote>
<div><ul class="simple">
<li>new functions (isotropic) derivative_matrix and laplace_matrix</li>
<li>compute_aniso_dmats and compute_iso_dmats takes care of obtaining
flux dependent or flux independent derivative matrices,</li>
<li>prepare_mag_data is an auxiliary function to calculate magnetic flux gradients and</li>
<li>px_norm is a simple auxiliary function to calculate norms for coefficients</li>
</ul>
</div></blockquote>
<dl class="function">
<dt id="tomotok.core.derivative.compute_aniso_dmats">
<code class="descclassname">tomotok.core.derivative.</code><code class="descname">compute_aniso_dmats</code><span class="sig-paren">(</span><em>grid</em>, <em>magflux</em>, <em>derivative=4</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.derivative.compute_aniso_dmats" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares matrix of finite differences, magnetic configuration dependent or
fixed simple differences. First or second derivative can be used</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grid</strong> : RegularGrid</p>
<blockquote>
<div><p>A reconstruction grid</p>
</div></blockquote>
<p><strong>magflux</strong> : numpy.ndarray</p>
<blockquote>
<div><p>values of psi normalized mapped to grid</p>
</div></blockquote>
<p><strong>mask</strong> : numpy.ndarray, optional</p>
<blockquote>
<div><p>bool mask</p>
</div></blockquote>
<p><strong>derivative</strong> : int in {1,2,3,4}</p>
<blockquote>
<div><p>specifies type of derivative scheme, default is 4</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">tuple of scipy.sparse.csrmatrix pairs</p>
<blockquote class="last">
<div><p>derivative matrix</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.derivative.compute_iso_dmats">
<code class="descclassname">tomotok.core.derivative.</code><code class="descname">compute_iso_dmats</code><span class="sig-paren">(</span><em>grid, derivatives=[1, 2], mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.derivative.compute_iso_dmats" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes isotropic derivative matrix pairs for given differential schemes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grid</strong> : RegularGrid</p>
<p><strong>mask</strong> : np.ndarray, optional</p>
<p><strong>derivatives</strong> : list of int/str, optional</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of dmat pairs</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.derivative.derivative_matrix">
<code class="descclassname">tomotok.core.derivative.</code><code class="descname">derivative_matrix</code><span class="sig-paren">(</span><em>grid: tomotok.core.geometry.grids.RegularGrid</em>, <em>direction: str</em>, <em>scheme: str = ‘forward’</em>, <em>mask: numpy.ndarray = None</em>, <em>compensate_edges=False</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.derivative.derivative_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a derivative matrix using numerical differences</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grid</strong> : RegularGrid</p>
<p><strong>direction</strong> : str</p>
<blockquote>
<div><p>Determines one of the 8 possible directions that can be used.
Specified using the over edge neighbor ‘right’, ‘top’, ‘left’, ‘bottom’ or
combination over corner directions like ‘top-left’</p>
</div></blockquote>
<p><strong>scheme</strong> : str, optional</p>
<blockquote>
<div><p>Selects numerical scheme to be used. Can be ‘forward’, ‘backward’, ‘central’, ‘second’.
The default value is ‘forward’.</p>
</div></blockquote>
<p><strong>mask</strong> : numpy.ndarray, optional</p>
<blockquote>
<div><p>A bool mask determining nodes of regular grid to keep, by default None.
Rows and columns representing False nodes are removed from derivative matrix.
If mask is None, all rows and columns are returned.</p>
</div></blockquote>
<p><strong>compensate_edges</strong> : bool, optional</p>
<blockquote>
<div><p>Subtracts from diagonal so that sum of each row is zero, by default False.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">scipy.sparse.csc_matrix</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.derivative.generate_anizo_matrix">
<code class="descclassname">tomotok.core.derivative.</code><code class="descname">generate_anizo_matrix</code><span class="sig-paren">(</span><em>grid</em>, <em>atan2</em>, <em>derivative</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.derivative.generate_anizo_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Write prepared directions atan2 into the derivative matrix.
Main magic of this algorithm. Rewrite arctan into the directions
and decompose directions to parallel and oblique direction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grid</strong> : RegularGrid</p>
<blockquote>
<div><p>Object with pixel grid gridinates</p>
</div></blockquote>
<p><strong>atan2</strong> : numpy.ndarray</p>
<blockquote>
<div><p>3D array of arcus tangents of Psi(R,z) evolution</p>
</div></blockquote>
<p><strong>derivative</strong> : int</p>
<blockquote>
<div><p>derivative type identificator</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bper</strong> : scipy.sparse</p>
<blockquote>
<div><p>sparse matrix with perpendicular derivatives</p>
</div></blockquote>
<p><strong>bpar</strong> : scipy.sparse</p>
<blockquote>
<div><p>sparse matrix with parallel derivatives</p>
</div></blockquote>
<p>bpar_tmp: numpy.array</p>
<blockquote>
<div><p>(optional) dense matrix with parallel derivatives</p>
</div></blockquote>
<p>bper_tmp: numpy.array</p>
<blockquote class="last">
<div><p>(optional) dense matrix with perpendicular derivatives</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.derivative.generate_iso_dmat">
<code class="descclassname">tomotok.core.derivative.</code><code class="descname">generate_iso_dmat</code><span class="sig-paren">(</span><em>grid: tomotok.core.geometry.grids.RegularGrid</em>, <em>derivative=4</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.derivative.generate_iso_dmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes isotropic derivative matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grid</strong> : RegularGrid</p>
<p><strong>derivative</strong> : list of int</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">scipy.sparse.csc_matrix, scipy.sparse.csc_matrix</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.derivative.get_index_shift">
<code class="descclassname">tomotok.core.derivative.</code><code class="descname">get_index_shift</code><span class="sig-paren">(</span><em>col_num: int</em>, <em>direction: str</em>, <em>distance: int = 1</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#tomotok.core.derivative.get_index_shift" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the index difference of a node neighbor on a flatten grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>col_num</strong> : int</p>
<blockquote>
<div><p>number of columns in reconstruction grid</p>
</div></blockquote>
<p><strong>direction</strong> : str</p>
<blockquote>
<div><p>Determines one of the 8 possible directions that can be used.
Specified using the over edge neighbor ‘right’, ‘top’, ‘left’, ‘bottom’ or
combination over corner directions like ‘top-left’</p>
</div></blockquote>
<p><strong>distance</strong> : int, optional</p>
<blockquote>
<div><p>expressed in number of nodes, by default 1</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">int</p>
<blockquote class="last">
<div><p>relative index of neighbor in flattened grid</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.derivative.laplace_matrix">
<code class="descclassname">tomotok.core.derivative.</code><code class="descname">laplace_matrix</code><span class="sig-paren">(</span><em>grid: tomotok.core.geometry.grids.RegularGrid</em>, <em>mask=None</em>, <em>compensate_edge=False</em>, <em>diagonals=True</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.derivative.laplace_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates sparse laplace matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grid</strong> : RegularGrid</p>
<p><strong>mask</strong> : numpy.ndarray, optional</p>
<blockquote>
<div><p>A bool mask determining nodes of regular grid to keep, by default None.
Rows and columns representing False nodes are removed from derivative matrix.
If mask is None, all rows and columns are returned.</p>
</div></blockquote>
<p><strong>compensate_edges</strong> : bool, optional</p>
<blockquote>
<div><p>Subtracts from diagonal so that sum of each row is zero, by default False.</p>
</div></blockquote>
<p><strong>diagonals</strong> : bool, optional</p>
<blockquote>
<div><p>Selects whether to use diagonal neighbors in matrix, by default True.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">scipy.sparse.csc_matrix</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.derivative.prepare_mag_data">
<code class="descclassname">tomotok.core.derivative.</code><code class="descname">prepare_mag_data</code><span class="sig-paren">(</span><em>flux</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.derivative.prepare_mag_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates gradient map of magnetic flux function Psi(R,z) and returns
arcus tangens of dPsi_y/-dPsi_x that is a suitable funciton for anizotropic
diffusion matrix calculation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>flux</strong> : numpy.ndarray</p>
<blockquote>
<div><p>array of Psi(R,z) evolution, with axes (z, R, t)</p>
</div></blockquote>
<p><strong>Returns</strong></p>
<p><strong>——</strong></p>
<p><strong>numpy.ndarray</strong></p>
<blockquote class="last">
<div><p>arcus tangens of Psi gradient</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.derivative.px_norm">
<code class="descclassname">tomotok.core.derivative.</code><code class="descname">px_norm</code><span class="sig-paren">(</span><em>direc</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.derivative.px_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Computed (normalised?) distance between centers of nodes.</p>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.derivative.reduce_dmats">
<code class="descclassname">tomotok.core.derivative.</code><code class="descname">reduce_dmats</code><span class="sig-paren">(</span><em>dmats</em>, <em>idx</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.derivative.reduce_dmats" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates reduced derivative matrices by cutting out rows and columns representing unwanted nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dmats</strong> : tuples of scipy.sparse.csr_matrix</p>
<blockquote>
<div><p>tuple containing full derivative matrices</p>
</div></blockquote>
<p><strong>idx</strong> : numpy.ndarray of bool</p>
<blockquote>
<div><p>array or mask array to select desired nodes</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list of scipy.sparse.csr_matrix pairs</p>
<blockquote class="last">
<div><p>derivative matrices with removed rows and columns representing nodes outside the bdr polygon (vacuum vessel)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tomotok.core.phantoms">
<span id="tomotok-core-phantoms-module"></span><h2>1.4. tomotok.core.phantoms module<a class="headerlink" href="#module-tomotok.core.phantoms" title="Permalink to this headline">¶</a></h2>
<p>Contains functions that can create emissivity phantoms.</p>
<p>Both isotropic one or based on the shape of flux surfaces.</p>
<dl class="function">
<dt id="tomotok.core.phantoms.gauss">
<code class="descclassname">tomotok.core.phantoms.</code><code class="descname">gauss</code><span class="sig-paren">(</span><em>x</em>, <em>w=0.1</em>, <em>lim=1</em>, <em>amp=1</em>, <em>cen=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.phantoms.gauss" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates anisotropic gaussian artificial emissivity by 1D transform of x</p>
<div class="math">
\[f = amp \left( \mathrm{e}^{-(x-cen)^2 / w } - \mathrm{e}^{-(lim-cen)^2 / w)} \right)\]</div>
<p>Can be used on np.ndarray. Lim should be greater than cen.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : float, array, np.ndarray</p>
<blockquote>
<div><p>Contains values to be transformed, usually psi</p>
</div></blockquote>
<p><strong>w</strong> : float, optional</p>
<blockquote>
<div><p>width of gaussian profile</p>
</div></blockquote>
<p><strong>lim</strong> : float, optional</p>
<blockquote>
<div><p>minimal value of x where transform gives zero
if x &gt; lim emissivity is set to zero</p>
</div></blockquote>
<p><strong>amp</strong> : float, optional</p>
<blockquote>
<div><p>amplitude of gaussian profile,</p>
</div></blockquote>
<p><strong>cen</strong> : float, optional</p>
<blockquote>
<div><p>center of gaussian profile
allows hollow profile generation when mapped on psi</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">numpy.ndarray</p>
<blockquote class="last">
<div><p>Transformed values of x with same dimensions</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.phantoms.gauss_iso">
<code class="descclassname">tomotok.core.phantoms.</code><code class="descname">gauss_iso</code><span class="sig-paren">(</span><em>nx</em>, <em>ny</em>, <em>span=1.2</em>, <em>w=0.1</em>, <em>lim=1</em>, <em>amp=1</em>, <em>cen=0</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.phantoms.gauss_iso" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates isotropic gaussian distribution.
See references for iso_psi and gauss</p>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.phantoms.islands">
<code class="descclassname">tomotok.core.phantoms.</code><code class="descname">islands</code><span class="sig-paren">(</span><em>psi</em>, <em>w=0.01</em>, <em>lim=1</em>, <em>amp=1</em>, <em>cen=0.4</em>, <em>num=3</em>, <em>shift=0</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.phantoms.islands" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates island like phantom from given psi profile. See references for gauss and polar_phase.</p>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.phantoms.iso_psi">
<code class="descclassname">tomotok.core.phantoms.</code><code class="descname">iso_psi</code><span class="sig-paren">(</span><em>nx</em>, <em>ny</em>, <em>span=1.5</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.phantoms.iso_psi" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates matrix of artificial isotropic psi profile with border values for
each axis equal to span.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>nx</strong> : int</p>
<blockquote>
<div><p>Number of pixels on x axis</p>
</div></blockquote>
<p><strong>ny</strong> : int</p>
<blockquote>
<div><p>Number of pixels on y axis</p>
</div></blockquote>
<p><strong>span</strong> : float, optional</p>
<blockquote>
<div><p>Value of result on the center of border</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">numpy.ndarray</p>
<blockquote class="last">
<div><p>Matrix with generated profile</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tomotok.core.phantoms.polar_phase">
<code class="descclassname">tomotok.core.phantoms.</code><code class="descname">polar_phase</code><span class="sig-paren">(</span><em>x</em>, <em>num=3</em>, <em>shift=0</em><span class="sig-paren">)</span><a class="headerlink" href="#tomotok.core.phantoms.polar_phase" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies sine phase in radial angle direction to given profile x.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : numpy.ndarray</p>
<blockquote>
<div><p>Profile for application of polar phase.</p>
</div></blockquote>
<p><strong>num</strong> : int, optional</p>
<blockquote>
<div><p>number of periods per one rotation</p>
</div></blockquote>
<p><strong>shift</strong> : float, optional</p>
<blockquote>
<div><p>initial phase shift</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">numpy.ndarray</p>
<blockquote class="last">
<div><p>Matrix with applied polar phase</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tomotok.core.geometry.html" class="btn btn-neutral float-right" title="1.1.1. tomotok.core.geometry package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../glossary.html" class="btn btn-neutral" title="7. Glossary" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Institute of Plasma Physics of CAS.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>